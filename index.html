<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BEAMOVE</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

<!-- Icons -->
<link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">

<!-- Font -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root{
--offwhite:#F6F1EC;
--marrom:#6B4C3B;
--marrom-escuro:#3E2A22;
--rose:#C49A8A;
--bg:white;
--text:#3E2A22;
}

body.dark{
--bg:#1e1e1e;
--text:#f1f1f1;
--offwhite:#1e1e1e;
--marrom:#C49A8A;
--marrom-escuro:#fff;
}

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Poppins',sans-serif;
transition:0.3s;
}

body{
background:var(--bg);
color:var(--text);
}

.hidden{display:none;}

.header{
display:flex;
justify-content:space-between;
align-items:center;
padding:15px;
font-weight:700;
font-size:20px;
background:var(--bg);
box-shadow:0 2px 10px rgba(0,0,0,0.05);
position:sticky;
top:0;
z-index:10;
}

.icon{
font-size:22px;
cursor:pointer;
}

.post{
background:var(--bg);
margin:15px;
border-radius:18px;
padding:15px;
box-shadow:0 5px 20px rgba(0,0,0,0.08);
animation:fadeIn 0.4s ease;
}

@keyframes fadeIn{
from{opacity:0;transform:translateY(10px);}
to{opacity:1;transform:translateY(0);}
}

.post img{
width:100%;
border-radius:15px;
margin-top:10px;
}

nav{
position:fixed;
bottom:0;
width:100%;
background:var(--bg);
display:flex;
justify-content:space-around;
padding:12px 0;
box-shadow:0 -2px 10px rgba(0,0,0,0.1);
}

nav i{
font-size:22px;
cursor:pointer;
}

input, textarea{
width:100%;
padding:12px;
margin:8px 0;
border-radius:12px;
border:1px solid #ccc;
background:var(--bg);
color:var(--text);
}

button{
padding:12px;
border:none;
border-radius:12px;
background:var(--marrom);
color:white;
font-weight:600;
cursor:pointer;
}

.profile-header{
display:flex;
align-items:center;
gap:20px;
padding:20px;
}

.profile-pic{
width:90px;
height:90px;
border-radius:50%;
background:#ccc;
}

.bio{
font-size:14px;
margin-top:5px;
}

.settings{
position:fixed;
top:60px;
right:15px;
background:var(--bg);
padding:15px;
border-radius:15px;
box-shadow:0 5px 20px rgba(0,0,0,0.15);
width:250px;
}

.chat-message{
margin-bottom:12px;
font-size:13px;
}

.chat-message span{
font-weight:600;
}
</style>
</head>
<body>

<div class="header">
BEAMOVE
<i class="ri-settings-3-line icon" onclick="toggleSettings()"></i>
</div>

<!-- SETTINGS -->
<div id="settingsBox" class="settings hidden">
<button onclick="toggleDark()">Modo Escuro</button>
<button onclick="openEditProfile()">Editar Perfil</button>
<button onclick="logout()">Sair</button>
</div>

<!-- HOME -->
<div id="home">
<div style="padding:15px;">
<input type="text" id="postText" placeholder="Compartilhe algo...">
<input type="file" id="postImage">
<button onclick="addPost()">Publicar</button>
</div>
<div id="feed"></div>
</div>

<!-- CHAT -->
<div id="chat" class="hidden">
<div style="padding:15px;">
<input type="text" id="privateUser" placeholder="@usuario para chat privado">
<input type="text" id="chatInput" placeholder="Mensagem">
<button onclick="sendMessage()">Enviar</button>
</div>
<div id="chatBox" style="padding:15px;"></div>
</div>

<!-- PROFILE -->
<div id="profile" class="hidden">
<div class="profile-header">
<div class="profile-pic"></div>
<div>
<h3 id="profileName"></h3>
<div class="bio" id="profileBio"></div>
<a id="profileLink" target="_blank"></a>
</div>
</div>
</div>

<!-- EDIT PROFILE -->
<div id="editProfile" class="hidden" style="padding:20px;">
<h3>Editar Perfil</h3>
<input type="text" id="editName" placeholder="Nome">
<textarea maxlength="200" id="editBio" placeholder="Bio (200 caracteres)"></textarea>
<input type="text" id="editLink" placeholder="Link">
<button onclick="saveProfile()">Salvar</button>
</div>

<nav>
<i class="ri-home-5-line" onclick="showTab('home')"></i>
<i class="ri-chat-3-line" onclick="showTab('chat')"></i>
<i class="ri-user-3-line" onclick="showTab('profile')"></i>
</nav>

<script>
const firebaseConfig={
apiKey:"AIzaSyBdIH1kKv_e4f25nubgQ9ED8hyfl-3FmbM",
authDomain:"beamove-pro.firebaseapp.com",
projectId:"beamove-pro",
storageBucket:"beamove-pro.firebasestorage.app",
messagingSenderId:"816563837877",
appId:"1:816563837877:web:7d812c57fecc0338f117fc"
};

firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();
const db=firebase.firestore();
const storage=firebase.storage();

function toggleSettings(){
settingsBox.classList.toggle("hidden");
}

function toggleDark(){
document.body.classList.toggle("dark");
}

function showTab(tab){
home.classList.add("hidden");
chat.classList.add("hidden");
profile.classList.add("hidden");
editProfile.classList.add("hidden");
document.getElementById(tab).classList.remove("hidden");
}

function formatDate(timestamp){
let d=timestamp.toDate();
return d.toLocaleDateString('pt-BR')+" "+d.toLocaleTimeString('pt-BR',{hour:'2-digit',minute:'2-digit'});
}

function addPost(){
let text=postText.value;
let file=postImage.files[0];

if(file){
let ref=storage.ref("posts/"+Date.now());
ref.put(file).then(snapshot=>{
snapshot.ref.getDownloadURL().then(url=>{
savePost(text,url);
});
});
}else{
savePost(text,null);
}
}

function savePost(text,image){
db.collection("posts").add({
text:text,
image:image,
user:auth.currentUser.uid,
created:firebase.firestore.FieldValue.serverTimestamp()
});
postText.value="";
postImage.value="";
}

function loadFeed(){
db.collection("posts").orderBy("created","desc")
.onSnapshot(snap=>{
feed.innerHTML="";
snap.forEach(doc=>{
let p=doc.data();
let div=document.createElement("div");
div.className="post";
div.innerHTML="<b>"+p.text+"</b>";
if(p.image){
div.innerHTML+=`<img src="${p.image}">`;
}
feed.appendChild(div);
});
});
}

function sendMessage(){
let toUser=privateUser.value;
let msg=chatInput.value;

db.collection("messages").add({
from:auth.currentUser.uid,
to:toUser,
message:msg,
created:firebase.firestore.FieldValue.serverTimestamp()
});
chatInput.value="";
}

function loadChat(){
db.collection("messages").orderBy("created")
.onSnapshot(snap=>{
chatBox.innerHTML="";
snap.forEach(doc=>{
let m=doc.data();
if(m.from===auth.currentUser.uid){
let div=document.createElement("div");
div.className="chat-message";
div.innerHTML="<span>VocÃª</span>: "+m.message+"<br><small>"+formatDate(m.created)+"</small>";
chatBox.appendChild(div);
}
});
});
}

function loadProfile(){
db.collection("users").doc(auth.currentUser.uid).get()
.then(doc=>{
let d=doc.data();
profileName.innerText=d.username;
profileBio.innerText=d.bio||"";
profileLink.innerText=d.link||"";
profileLink.href=d.link||"#";
});
}

function openEditProfile(){
showTab("editProfile");
}

function saveProfile(){
db.collection("users").doc(auth.currentUser.uid).update({
bio:editBio.value,
link:editLink.value
});
showTab("profile");
}

function logout(){
auth.signOut();
}

auth.onAuthStateChanged(user=>{
if(user){
loadFeed();
loadChat();
loadProfile();
}else{
location.reload();
}
});
</script>

</body>
</html>
