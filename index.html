<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BEAMOVE</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<!-- Icons -->
<script src="https://unpkg.com/lucide@latest"></script>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
:root{
--offwhite:#F6F1EC;
--marrom:#6B4C3B;
--marrom-escuro:#3E2A22;
--rose:#C49A8A;
--card:#ffffff;
}

body{
margin:0;
font-family:'Poppins',sans-serif;
background:var(--offwhite);
color:var(--marrom-escuro);
transition:0.3s;
}

.dark{
background:#121212;
color:#f5f5f5;
}

.dark .card,
.dark .post,
.dark .profile-card,
.dark .chat-box,
.dark nav{
background:#1e1e1e;
color:#fff;
}

header{
padding:18px;
font-weight:700;
font-size:20px;
display:flex;
justify-content:space-between;
align-items:center;
}

button{
background:var(--marrom);
color:white;
border:none;
padding:12px;
border-radius:12px;
cursor:pointer;
font-weight:500;
transition:0.3s;
}

button:hover{
background:var(--marrom-escuro);
}

input,textarea{
width:100%;
padding:12px;
margin:6px 0;
border-radius:12px;
border:1px solid #ddd;
font-family:'Poppins';
}

.hidden{display:none;}

nav{
position:fixed;
bottom:0;
width:100%;
display:flex;
justify-content:space-around;
padding:12px 0;
background:white;
box-shadow:0 -2px 10px rgba(0,0,0,0.05);
}

nav button{
background:none;
color:var(--marrom);
}

.section{
padding:15px;
padding-bottom:80px;
}

/* CARDS */
.card{
background:var(--card);
padding:20px;
border-radius:20px;
margin-bottom:15px;
box-shadow:0 10px 25px rgba(0,0,0,0.05);
transition:0.3s;
}

.card:hover{
transform:translateY(-4px);
}

.card-highlight{
background:linear-gradient(135deg,var(--rose),var(--marrom));
color:white;
}

/* FEED */
.post{
background:white;
padding:15px;
border-radius:20px;
margin-bottom:12px;
box-shadow:0 6px 18px rgba(0,0,0,0.05);
animation:fadeUp 0.4s ease;
}

@keyframes fadeUp{
from{opacity:0;transform:translateY(15px);}
to{opacity:1;transform:translateY(0);}
}

/* CHAT */
.chat-box{
height:280px;
overflow-y:auto;
background:white;
border-radius:18px;
padding:12px;
margin-bottom:10px;
}

/* PERFIL */
.profile-card{
background:white;
padding:25px;
border-radius:25px;
text-align:center;
box-shadow:0 10px 25px rgba(0,0,0,0.05);
}

.profile-img{
width:110px;
height:110px;
border-radius:50%;
margin:auto;
background:linear-gradient(45deg,var(--rose),var(--marrom));
}

.profile-username{
font-weight:600;
font-size:20px;
margin-top:10px;
}

.profile-bio{
font-size:14px;
margin-top:8px;
}

.profile-link{
font-size:13px;
color:var(--marrom);
margin-top:6px;
display:block;
}

/* MODAL SETTINGS */
.modal{
position:fixed;
bottom:0;
width:100%;
background:white;
border-radius:25px 25px 0 0;
padding:25px;
box-shadow:0 -5px 25px rgba(0,0,0,0.1);
animation:slideUp 0.3s ease;
}

.dark .modal{background:#1e1e1e;}

@keyframes slideUp{
from{transform:translateY(100%);}
to{transform:translateY(0);}
}
</style>
</head>

<body>

<header>
<span>BEAMOVE</span>
</header>

<!-- LOGIN -->
<div id="loginScreen" class="section">
<input type="email" id="loginEmail" placeholder="Email">
<input type="password" id="loginPassword" placeholder="Senha">
<button onclick="login()">Entrar</button>
<button onclick="showRegister()">Criar Conta</button>
</div>

<!-- REGISTER -->
<div id="registerScreen" class="section hidden">
<input type="text" id="username" placeholder="@usuario obrigatório">
<input type="email" id="registerEmail" placeholder="Email">
<input type="password" id="registerPassword" placeholder="Senha">
<button onclick="register()">Cadastrar</button>
<button onclick="showLogin()">Voltar</button>
</div>

<!-- APP -->
<div id="appScreen" class="hidden">

<!-- HOME -->
<div id="home" class="section">
<div id="feed"></div>
<input type="text" id="postInput" placeholder="Compartilhe algo...">
<button onclick="addPost()">Publicar</button>
</div>

<!-- EXPLORAR -->
<div id="explorar" class="section hidden">
<div class="card card-highlight">
<h3>Acompanhamento Nutricional</h3>
<p>Transformação personalizada com acompanhamento profissional.</p>
<button onclick="window.open('https://hotmart.com')">Comprar via Hotmart</button>
<button onclick="window.open('https://kiwify.com')">Comprar via Kiwify</button>
</div>

<div class="card">
<h3>Curso de Yoga</h3>
<p>Equilíbrio físico e mental.</p>
</div>

<div class="card">
<h3>Programa de Emagrecimento</h3>
<p>Resultados sustentáveis.</p>
</div>

<div class="card">
<h3>Ebooks Fitness</h3>
<p>Conteúdo exclusivo para evolução contínua.</p>
</div>
</div>

<!-- PERFIL -->
<div id="perfil" class="section hidden">
<div class="profile-card">
<div class="profile-img"></div>
<div class="profile-username" id="profileUsername"></div>
<div class="profile-bio" id="profileBio"></div>
<a id="profileLink" class="profile-link" target="_blank"></a>
<button onclick="openSettings()">⚙ Ajustes</button>
<button onclick="logout()">Sair</button>
</div>
</div>

<!-- SETTINGS MODAL -->
<div id="settingsModal" class="modal hidden">
<h3>Configurações</h3>
<button onclick="toggleDark()">Modo Escuro</button>
<h4>Editar Perfil</h4>
<input type="text" id="editBio" maxlength="200" placeholder="Bio até 200 caracteres">
<input type="text" id="editLink" placeholder="Link">
<button onclick="saveProfile()">Salvar Alterações</button>
<button onclick="closeSettings()">Fechar</button>
</div>

<nav>
<button onclick="showTab('home')"><i data-lucide="home"></i></button>
<button onclick="showTab('explorar')"><i data-lucide="compass"></i></button>
<button onclick="showTab('perfil')"><i data-lucide="user"></i></button>
</nav>

</div>

<script>
lucide.createIcons();

const firebaseConfig={
apiKey:"AIzaSyBdIH1kKv_e4f25nubgQ9ED8hyfl-3FmbM",
authDomain:"beamove-pro.firebaseapp.com",
projectId:"beamove-pro",
storageBucket:"beamove-pro.firebasestorage.app",
messagingSenderId:"816563837877",
appId:"1:816563837877:web:7d812c57fecc0338f117fc"
};

firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();
const db=firebase.firestore();

/* AUTH */
function register(){
let user=username.value.trim();
if(!user.startsWith("@")) return alert("Username deve começar com @");

db.collection("users").where("username","==",user).get()
.then(s=>{
if(!s.empty) return alert("Username já existe");

auth.createUserWithEmailAndPassword(registerEmail.value,registerPassword.value)
.then(c=>{
db.collection("users").doc(c.user.uid).set({
username:user,
bio:"",
link:""
});
showLogin();
});
});
}

function login(){
auth.signInWithEmailAndPassword(loginEmail.value,loginPassword.value);
}

function logout(){
auth.signOut();
location.reload();
}

function showRegister(){
loginScreen.classList.add("hidden");
registerScreen.classList.remove("hidden");
}

function showLogin(){
registerScreen.classList.add("hidden");
loginScreen.classList.remove("hidden");
}

auth.onAuthStateChanged(user=>{
if(user){
loginScreen.classList.add("hidden");
appScreen.classList.remove("hidden");
loadFeed();
loadProfile();
}
});

/* FEED */
function addPost(){
if(postInput.value==="") return;
db.collection("posts").add({
text:postInput.value,
created:new Date()
});
postInput.value="";
}

function loadFeed(){
db.collection("posts").orderBy("created","desc")
.onSnapshot(s=>{
feed.innerHTML="";
s.forEach(doc=>{
let d=doc.data();
let div=document.createElement("div");
div.className="post";
div.innerText=d.text;
feed.appendChild(div);
});
});
}

/* PERFIL */
function loadProfile(){
db.collection("users").doc(auth.currentUser.uid).get()
.then(doc=>{
let d=doc.data();
profileUsername.innerText=d.username;
profileBio.innerText=d.bio;
profileLink.innerText=d.link;
profileLink.href=d.link;
});
}

function openSettings(){
settingsModal.classList.remove("hidden");
}

function closeSettings(){
settingsModal.classList.add("hidden");
}

function saveProfile(){
db.collection("users").doc(auth.currentUser.uid).update({
bio:editBio.value,
link:editLink.value
});
loadProfile();
closeSettings();
}

function toggleDark(){
document.body.classList.toggle("dark");
}

function showTab(tab){
home.classList.add("hidden");
explorar.classList.add("hidden");
perfil.classList.add("hidden");
document.getElementById(tab).classList.remove("hidden");
}
</script>

</body>
</html>
